<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mini Clash</title>

<style>
*{box-sizing:border-box}
html,body{
  margin:0;padding:0;
  width:100%;height:100%;
  font-family:sans-serif;
  background:#f2f2f2;
  overflow:hidden
}

/* ìŠ¬ë¼ì´ë” */
#slider{
  display:flex;
  width:500vw;
  height:calc(100vh - 60px);
  transition:transform .25s ease;
}
.page{ width:100vw; padding:16px; overflow-y:auto }

/* ë„¤ë¹„ */
.nav{
  position:fixed;bottom:0;width:100%;height:60px;
  display:flex;background:#ddd;border-top:1px solid #bbb;
}
.nav button{flex:1;border:none;background:none;font-size:14px;}

/* ë°•ìŠ¤ */
.box{background:#fff;border-radius:10px;padding:12px;margin:10px 0;}

/* ì¹´ë“œ */
.cardlist{display:flex;gap:12px;flex-wrap:wrap;}
.cardbox{
  width:90px;text-align:center;cursor:pointer
}
.char{
  width:60px;height:60px;border-radius:50%;margin:0 auto 6px;
}
.knight{background:#888;}
.archer{background:#4caf50;}
.giant{background:#ff9800;}
.barbarian{background:#f44336;}

/* ë± */
#deck{
  display:grid;grid-template-columns:repeat(4,1fr);gap:8px;
}
.deckslot{
  height:100px;border:2px solid #aaa;border-radius:8px;
  display:flex;align-items:center;justify-content:center;
  flex-direction:column;background:#fafafa;cursor:pointer
}
.deckslot.empty{border-style:dashed;color:#aaa}

/* ë°°í‹€ */
.center{text-align:center}
button.full{
  width:100%;padding:12px;font-size:18px;
  border:none;background:#2b6cff;color:#fff;
  border-radius:8px;cursor:pointer;margin-top:16px
}
</style>
</head>

<body>

<div id="slider">

<!-- 0 ìƒì  -->
<div class="page">
  <h2>ìƒì </h2>
  <div class="box">
    <input id="coupon" placeholder="ì¿ í° ì½”ë“œ">
    <button onclick="useCoupon()">í™•ì¸</button>
  </div>
</div>

<!-- 1 ì¹´ë“œ -->
<div class="page">
  <h2>ì¹´ë“œ</h2>
  <div class="box">
    <div id="deck"></div>
  </div>

  <div class="box">
    <div class="cardlist">
      <div class="cardbox" onclick="toggleCard('ê¸°ì‚¬','knight')">
        <div class="char knight"></div>ê¸°ì‚¬
      </div>
      <div class="cardbox" onclick="toggleCard('ì•„ì²˜','archer')">
        <div class="char archer"></div>ì•„ì²˜
      </div>
      <div class="cardbox" onclick="toggleCard('ìì´ì–¸íŠ¸','giant')">
        <div class="char giant"></div>ìì´ì–¸íŠ¸
      </div>
      <div class="cardbox" id="barbCard" style="display:none"
           onclick="toggleCard('ë°”ë°”ë¦¬ì•ˆ','barbarian')">
        <div class="char barbarian"></div>ë°”ë°”ë¦¬ì•ˆ
      </div>
    </div>
  </div>
</div>

<!-- 2 ë°°í‹€ -->
<div class="page center">
  <h2>ë°°í‹€</h2>
  <p>ì´ë¦„: <b id="playerName"></b></p>
  <p>íŠ¸ë¡œí”¼: ğŸ† <span id="trophy">0</span></p>
  <button class="full" onclick="alert('íŠ¸ë¡œí”¼ ì¤€ë¹„ì¤‘')">íŠ¸ë¡œí”¼</button>
  <button class="full" onclick="alert('ë§¤ì¹­ ì¤€ë¹„ì¤‘')">ì „íˆ¬ ì‹œì‘</button>
</div>

<!-- 3 í´ëœ -->
<div class="page">
  <h2>í´ëœ</h2>

  <div id="clanCreate" class="box">
    <input id="clanName" placeholder="í´ëœ ì´ë¦„">
    <button onclick="createClan()">ìƒì„±</button>
  </div>

  <div id="clanInside" style="display:none;">
    <div class="box">
      <b>í´ëœ:</b> <span id="currentClanName"></span><br><br>
      <button onclick="leaveClan()">í´ëœ ë‚˜ê°€ê¸°</button>
    </div>
  </div>

  <div class="box">
    <b>í´ëœ ëª©ë¡</b><br><br>
    <div id="clanList"></div>
  </div>
</div>

<!-- 4 í† ë„ˆë¨¼íŠ¸ -->
<div class="page">
  <h2>í† ë„ˆë¨¼íŠ¸</h2>
  <div class="box">ì¤€ë¹„ì¤‘</div>
</div>

</div>

<div class="nav">
  <button onclick="go(0)">ìƒì </button>
  <button onclick="go(1)">ì¹´ë“œ</button>
  <button onclick="go(2)">ë°°í‹€</button>
  <button onclick="go(3)">í´ëœ</button>
  <button onclick="go(4)">í† ë„ˆë¨¼íŠ¸</button>
</div>

<script>
/* ìŠ¬ë¼ì´ë“œ */
const slider = document.getElementById("slider");
let currentPage = 1;
function go(n){
  currentPage=n;
  slider.style.transform = `translateX(-${n*100}vw)`;
}
go(1);

/* ì´ë¦„ */
const playerName =
  localStorage.getItem("name") || "í”Œë ˆì´ì–´";
document.getElementById("playerName").innerText = playerName;

/* ë± */
const deckEl = document.getElementById("deck");
let deck = JSON.parse(localStorage.getItem("deck") || "[]");

function renderDeck(){
  deckEl.innerHTML="";
  for(let i=0;i<8;i++){
    const slot=document.createElement("div");
    slot.className="deckslot";
    if(deck[i]){
      slot.innerHTML =
        `<div class="char ${deck[i].color}"></div>${deck[i].name}`;
      slot.onclick=()=>removeCard(deck[i].name);
    }else{
      slot.classList.add("empty");
      slot.innerText="+";
    }
    deckEl.appendChild(slot);
  }
}

function toggleCard(name,color){
  const idx=deck.findIndex(c=>c.name===name);
  if(idx!==-1) deck.splice(idx,1);
  else{
    if(deck.length>=8) return;
    deck.push({name,color});
  }
  localStorage.setItem("deck",JSON.stringify(deck));
  renderDeck();
}

function removeCard(name){
  deck=deck.filter(c=>c.name!==name);
  localStorage.setItem("deck",JSON.stringify(deck));
  renderDeck();
}
renderDeck();

/* ì¿ í° */
function useCoupon(){
  if(coupon.value.trim().toUpperCase()==="BARBARIAN"){
    barbCard.style.display="block";
    alert("ë°”ë°”ë¦¬ì•ˆ ì§€ê¸‰");
  }else{
    alert("ì˜ëª»ëœ ì½”ë“œ");
  }
}

/* í´ëœ */
let clans = JSON.parse(localStorage.getItem("clans")||"[]");
let myClan = localStorage.getItem("myClan")||"";

function createClan(){
  const name = clanName.value.trim();
  if(!name) return;
  clans.push(name);
  localStorage.setItem("clans",JSON.stringify(clans));
  joinClan(name);
}

function joinClan(name){
  myClan=name;
  localStorage.setItem("myClan",name);
  renderClan();
}

function leaveClan(){
  myClan="";
  localStorage.removeItem("myClan");
  renderClan();
}

function renderClan(){
  clanList.innerHTML="";
  clans.forEach(c=>{
    const d=document.createElement("div");
    d.className="box";
    d.innerText=c;
    d.onclick=()=>joinClan(c);
    clanList.appendChild(d);
  });

  if(myClan){
    clanCreate.style.display="none";
    clanInside.style.display="block";
    currentClanName.innerText=myClan;
  }else{
    clanCreate.style.display="block";
    clanInside.style.display="none";
  }
}
renderClan();
</script>

</body>
</html>
